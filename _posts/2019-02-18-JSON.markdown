---
layout: post
title: "JS0N"
subtitle: 'HackTheBox - Medium Machine - Linux'
date: 2019-11-08 12:00:00
author: "TheusZero"
header-img: "images/post/js0n.png"
catalog: true
comments: true
tags:
  - Windows
  - Machine
  - Explotations
  - Upgrade
  - Shell
  - Root
  - User
---

# JS0N


## Enumeracion

#### NMAP

Primero empezamos con un NMAP comun para ver con que puertos podemos jugar:

```vim
# Nmap 7.80 scan initiated Tue Feb 18 20:14:13 2020 as: nmap -sC -sV -o nmap.txt 10.10.10.158
Nmap scan report for 10.10.10.158
Host is up (0.19s latency).
Not shown: 988 closed ports
PORT      STATE SERVICE      VERSION
21/tcp    open  ftp          FileZilla ftpd
| ftp-syst: 
|_  SYST: UNIX emulated by FileZilla
80/tcp    open  http         Microsoft IIS httpd 8.5
| http-methods: 
|_  Potentially risky methods: TRACE
|_http-server-header: Microsoft-IIS/8.5
|_http-title: Json HTB
135/tcp   open  msrpc        Microsoft Windows RPC
139/tcp   open  netbios-ssn  Microsoft Windows netbios-ssn
445/tcp   open  microsoft-ds Microsoft Windows Server 2008 R2 - 2012 microsoft-ds
49152/tcp open  msrpc        Microsoft Windows RPC
49153/tcp open  msrpc        Microsoft Windows RPC
49154/tcp open  msrpc        Microsoft Windows RPC
49155/tcp open  msrpc        Microsoft Windows RPC
49156/tcp open  msrpc        Microsoft Windows RPC
49157/tcp open  msrpc        Microsoft Windows RPC
49158/tcp open  msrpc        Microsoft Windows RPC
Service Info: OSs: Windows, Windows Server 2008 R2 - 2012; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: mean: 4h01m23s, deviation: 0s, median: 4h01m23s
|_nbstat: NetBIOS name: JSON, NetBIOS user: <unknown>, NetBIOS MAC: 00:50:56:bd:5f:22 (VMware)
|_smb-os-discovery: ERROR: Script execution failed (use -d to debug)
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2020-02-19T03:16:53
|_  start_date: 2020-02-18T23:38:47

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Tue Feb 18 20:15:35 2020 -- 1 IP address (1 host up) scanned in 82.42 seconds
```
> 21/tcp    open  ftp          FileZilla ftpd
 | ftp-syst: 
 |_  SYST: UNIX emulated by FileZilla

Puede que este puerto nos sirva por lo que procederemos a ver que tal

#### FTP

Al intentar entrar por FTP obtengo lo siguiente:

```vim
root@Kali:~/HTB/Machines/JS0N# ftp -v 10.10.10.158
Connected to 10.10.10.158.
220-FileZilla Server 0.9.60 beta
220-written by Tim Kosse (tim.kosse@filezilla-project.org)
220 Please visit https://filezilla-project.org/
Name (10.10.10.158:root): anonymous
331 Password required for anonymous
Password:
530 Login or password incorrect!
Login failed.
Remote system type is UNIX.
ftp> quit
221 Goodbye
```

fallido, sin embargo hay algo raro:

>FileZilla Server 0.9.60 beta

Puede que sirva para algo uwu, a googlear se ha dicho.

#### 80 HTTP 
Aqui paso algo raro, al entrar al puerto 80 por el navegador ocurre una redireccion a un login, que me pide un email y una password (que quiza pueda obtener del smbclient) por lo cual explorare colocando a no cargar cuando me quiera redirigir.

![](/TheusZero/images/post/Js0n/JS0N1.png)

Haciendo un burpsuite a login obtengo esto:

![](/TheusZero/images/post/Js0n/JS0N2.png)

Probando usuarios, me salia esto:

> "User Not Exists"

Asi que me puse a probar, hasta que encontre la terminacion 

> USER: admin PASSWORD: admin

y en burpsuite me entrego esta cookie:

> OAuth2=eyJJZCI6MSwiVXNlck5hbWUiOiJhZG1pbiIsIlBhc3N3b3JkIjoiMjEyMzJmMjk3YTU3YTVhNzQzODk0YTBlNGE4MDFmYzMiLCJOYW1lIjoiVXNlciBBZG1pbiBIVEIiLCJSb2wiOiJBZG1pbmlzdHJhdG9yIn0=

Es un base 64 que nos da lo siguiente:

>{"Id":1,"UserName":"admin","Password":"21232f297a57a5a743894a0e4a801fc3","Name":"User Admin HTB","Rol":"Administrator"}\

